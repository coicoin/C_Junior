#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>
int main(void)
{
    char name[25];
    int n;
    FILE *f;
    int flag = 1, i;
    void srand();
        //Создадим цикл, позволяющий корректировать ввод имени файла
    do
    {
        printf("Введите имя создаваемого файла: ");
        scanf("%s", name);
        //Попытка открыть файл для чтения. Если такой файл уже существует, то задать вопрос пользователю
        if ((f = fopen(name,"r"))!=NULL)
        {
        //Заменить существующий файл?
            printf("Файл уже существует. Заменить? (y/n)");
            char ch = getchar();
    //Если пользователь нажал кнопку "n", вернуться к началу цикла
            if (ch == 'n') {continue;}
        }
    /*В этот блок программы управление попадет, только если пользователь подтвердил замену
    или задал имя несуществующего файла.*/
    //Создать файл
        if ((f=fopen(name,"w"))==NULL)
        {
            printf("Ошибка создания файла");
            system("pause");
            break;    
        }
        printf("\nВведите размерность массива: ");
        scanf("%d",&n);
        for(i=0; i<n; i++)
        {
            float y = rand()%100/(rand()%50+1.)-rand()%30;
        //На одной строке файла печатать только 10 элементов.
            if (i>=10&&i%10==0) fprintf(f,"\n");
            fprintf(f,"%8.3f",y);
        }
        //Закрыть файл.
            fclose(f);
        //Закончить цикл
            flag = 0;
    }
    while (flag);
    printf("\nФайл создан");
    system ("pause");
    return 0;
}
